# MC6847 Replacement #

The purpose of this repository is the development and testing
of a CPLD based replacement for the very modest Motorola MC6847
video display generator chip

## Design Specification ##

The replacement is intended to act as a functional replacement
for Motorola's budget video display generator from 1984.

It will provide all of the display modes provided by the original,
using identical timing to produce a 256x192 pixel viewport over a
NTSC compatible format.

The full set of address lines will be exposed, not just DA0.

The external character ROM support will be included.

Note. This is not intended to act as a replacement for the 
interlace Y variant.

### Changes ###

1. The colour palette used by the CPLD version will, effectively,
be programmable either by reflashing the host device or through
a control pin exposed through the interface.

2. The video format can be switched to PAL timing using a
control pin to set the desired format (switchable only at
frame sync).

3. The correct colour carrier clock will be generated by the
device and exposed over the interface.

4. The output format will be RGB instead of the (almsot) YUV
of the original.

5. Colour burst will not be generated.

6. The host interface will not be pin entirely pin compatible
with the original (RGB output instead of YUV plus additional
control pins).

## Design Tools ##

The CPLD HDL is being developed in Quartus II v13 in order
to support the older MAX7000 devices but a modern version
of Vivado is being utilised for deeper analysis and testing
than Quartus II can provide

## Development Plan ##

1. NTSC/PAL timing switch
2. NTSC/PAL frame timing (HS and VS signals)
3. Viewport/Blank/Border multiplexer and timing
4. Higher graphic modes (32 byte wide modes 7 then 6)
5. Colour generator (colour id to 12 bit RGB)
6. Colour set switch
7. Lower graphic modes (8 byte wide mode 0)
8. Lower graphic modes (16 byte wide)
9. Data Address Register and preload timing
10. Semigraphics 4 and 6
11. Alphanumerics (incl row counter and reset)

## Target Device ##

The design is being coded to work on an Intel/Altera 
MAX7000S EPM7128SLC84. This is also compatible with 
the Microschip/Atmel ATF1508AS. Both provide 128 
macrocells and 64 IO pins

## Hardware Testing ##

The design is being tested using a custom built
computer based on the Motorola reference design
for the MC6809 (as used by TRS Color Computer).
This leverages the Motorola SAM chip for addressing
which in turn limits active testing of the full
MC6847 data address register behaviour.

The data address register will be tested only
through simulation and monitoring of the relevant
IO pins
